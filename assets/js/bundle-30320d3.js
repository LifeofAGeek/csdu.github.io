"use strict";var t=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}
/**
 * @preserve
 * Developed by Sid Vishnoi
 * (https://github.com/sidvishnoi)
 * Copyright 2018
 */var e={ct:" ".repeat(13)+"Hey you, Hackerman!"+" ".repeat(16)+"\n"+" ".repeat(2)+"I see you are interested in the source code."+" ".repeat(2)+"\n"+" ".repeat(13)+"Let me help you :)"+" ".repeat(17),st:"background: #bada55;color:#000;font-weight: bold;"};console.log("%c"+e.ct,e.st),console.log("%c"+" ".repeat(1)+"https://github.com/sidvishnoi/sankalan-2018"+" ".repeat(2),"color: yellow;padding:4px;background:#000");var i=function(){return"/sankalan/"===window.location.pathname.replace("index.html","")};i()&&document.body.classList.add("is-front-page");var o=function(){function e(t){n(this,e),this.canvas=t,this.ctx=t.getContext("2d"),this.polylines=[],this.frameCount=0,this.backgroundColor="#fff";var i=.125*(2*Math.PI);this.ANGLES=[i,-i,Math.PI-i,Math.PI+i],this.NUM_LINES=10,this.NUM_SEGMENT=8,this.SEGMENT_LENGTH=120,this.RESET_FACTOR=5}return t(e,[{key:"changeBackground",value:function(t){this.backgroundColor=t}},{key:"buildLine",value:function(t){var n=t||{};return n.color={},n.color.r=this.constructor.randomInt(192),n.color.g=this.constructor.randomInt(128),n.color.b=this.constructor.randomInt(256),n.points=[],n}},{key:"nextAngle",value:function(){var t=this.constructor.randomInt(this.ANGLES.length);return this.ANGLES[t]}},{key:"getNextPoint",value:function(t,n,e){var i=e||{};t.angle=this.nextAngle(t.angle),i.x=t.points[n-1].x+Math.cos(t.angle)*this.SEGMENT_LENGTH,i.y=t.points[n-1].y+Math.sin(t.angle)*this.SEGMENT_LENGTH,t.points.push(i)}},{key:"initPolyLine",value:function(t){t.points.push({x:this.constructor.randomInt(this.canvas.width),y:this.constructor.randomInt(this.canvas.height)});for(var n=1;n<this.NUM_SEGMENT;n+=1)this.getNextPoint(t,n);return t}},{key:"drawLine",value:function(t){this.ctx.strokeStyle=this.constructor.createRgbString(t.color);for(var n=1;n<t.points.length;n+=1)this.ctx.beginPath(),this.ctx.moveTo(t.points[n-1].x,t.points[n-1].y),this.ctx.lineTo(t.points[n].x,t.points[n].y),this.ctx.stroke()}},{key:"isPointInside",value:function(t){return t.y>0&&t.y<this.canvas.height&&t.x<this.canvas.width&&t.x>0}},{key:"resetLine",value:function(t){var n=this.polylines.indexOf(t),e=this.polylines.splice(n,1)[0],i=this.buildLine(e),o=this.initPolyLine(i);this.polylines.push(o)}},{key:"moveLine",value:function(t){for(var n=this,e=0;e<t.points.length;e+=1)t.points[e].y+=.01;0===t.points.filter(function(t){return n.isPointInside(t)}).length&&this.resetLine(t)}},{key:"move",value:function(){var t=!0,n=!1,e=void 0;try{for(var i,o=this.polylines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;this.moveLine(r)}}catch(t){n=!0,e=t}finally{try{!t&&o.return&&o.return()}finally{if(n)throw e}}}},{key:"shiftPoint",value:function(t){var n=t.points.shift();this.getNextPoint(t,t.points.length,n)}},{key:"animate",value:function(){this.canvas.width=this.canvas.width,this.canvas.style.background=this.backgroundColor,this.move();var t=!0,n=!1,e=void 0;try{for(var i,o=this.polylines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;this.drawLine(r)}}catch(t){n=!0,e=t}finally{try{!t&&o.return&&o.return()}finally{if(n)throw e}}if(this.frameCount%this.RESET_FACTOR==0){this.frameCount=0;var a=!0,s=!1,c=void 0;try{for(var l,h=this.polylines[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var u=l.value;this.shiftPoint(u)}}catch(t){s=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(s)throw c}}}return this.frameCount+=1,window.requestAnimationFrame(this.anim)}},{key:"resize",value:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}},{key:"init",value:function(){for(var t=0;t<this.NUM_LINES;t+=1){var n=this.buildLine();this.polylines.push(n)}for(var e=0,i=this.polylines.length;e<i;e+=1)this.initPolyLine(this.polylines[e]);this.anim=this.animate.bind(this),this.resize(),this.animate(),window.addEventListener("resize",this.resize)}}],[{key:"createRgbString",value:function(t){return"rgb("+t.r+","+t.g+","+t.b+")"}},{key:"randomInt",value:function(t){return Math.floor(Math.random()*t)}}]),e}(),r=document.getElementById("canvas"),a=new o(r);a.init(),i()||a.changeBackground("#000");var s=void 0,c=500,l=void 0,h=function(t){document.title=t.title,window.history.pushState(t,t.title,t.link)},u=function(){document.body.classList.add("loading"),a.changeBackground("#000")},d=function(){var t=new Date-l;t=t>c?0:c-t,window.setTimeout(function(){return document.body.classList.remove("loading")},t)},f=function(t){var n=document.getElementById("main");if(""===t.slug?(document.body.classList.add("is-front-page"),a.changeBackground("#fff")):(document.body.classList.remove("is-front-page"),a.changeBackground("#000")),!t.link)throw new Error("bad content");return window.scrollTo(0,0),n.innerHTML=t.content,d(),t},v=function(t){var n=t+"index.json";return window.fetch(n).then(function(t){var n=t.headers.get("Content-Type");return t.ok?n.includes("application/json")?Promise.resolve(t.json()):Promise.reject(new Error("invalid response")):Promise.reject(new Error(t.statusCode))}).then(f).then(h).then(s).catch(function(t){console.error(t),d(),a.changeBackground(i()?"#fff":"#000")})};window.onpopstate=function(t){var n=t.state;n&&n.link||(window.location.href=window.location.href),l=(new Date).valueOf()+250,u(),f(n),s()};var y=function(t){t.preventDefault();var n=t.target.closest("a");l=new Date,u(),v(n.href)};(s=function(){var t=document.querySelectorAll("a.xhr"),n=!0,e=!1,i=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var a=o.value;a.removeEventListener("click",y);var s=a.href;s.replace(window.location.protocol+"//"+window.location.host,"")!==s&&(s!==window.location.href?a.addEventListener("click",y):a.addEventListener("click",function(t){return t.preventDefault()}))}}catch(t){e=!0,i=t}finally{try{!n&&r.return&&r.return()}finally{if(e)throw i}}})();